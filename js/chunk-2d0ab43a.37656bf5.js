(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"album py-5 bg-light"},[r("div",{staticClass:"container"},[r("UserProfileCard",{attrs:{"user-profile":e.userProfile,"initial-is-followed":e.isFollowed,"is-current-user":e.currentUser.id===e.userProfile.id}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:e.followings}}),r("br"),r("UserFollowersCard",{attrs:{followers:e.followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{comments:e.comments}}),r("UserFavoritedRestaurantsCard",{attrs:{"favorited-restaurants":e.favoritedRestaurants}})],1)])],1)])},a=[],i=r("1da1"),n=r("5530"),l=(r("96cf"),r("b0c0"),r("4de4"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{staticStyle:{width:"300px",height:"300px"},attrs:{src:e._f("emptyImage")(e.personalProfile.image),alt:""}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(" "+e._s(e.personalProfile.name)+" ")]),r("p",{staticClass:"card-text"},[e._v(" "+e._s(e.personalProfile.email)+" ")]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[e._v(e._s(e.personalProfile.commentLength))]),e._v(' " 已評論過餐廳" ')]),r("li",[r("strong",[e._v(e._s(e.personalProfile.favoriteRestaurantLength))]),e._v(' " 收藏的餐廳" ')]),r("li",[r("strong",[e._v(e._s(e.personalProfile.followingLength))]),e._v(' " followings (追蹤者)" ')]),r("li",[r("strong",[e._v(e._s(e.personalProfile.followerLength))]),e._v(' " followers (追隨者)" ')])]),[e.isCurrentUser?r("router-link",{attrs:{to:{name:"user-profile-edit",params:{id:e.personalProfile.id}}}},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(" edit ")])]):[e.isFollowed?r("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollowing(e.personalProfile.id)}}},[e._v(" 取消追蹤 ")]):r("button",{staticClass:"btn btn-info",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing(e.personalProfile.id)}}},[e._v(" 追蹤 ")])]]],2)])])])}),o=[],c=r("ac0d"),d=r("4cce"),u=r("c968"),f={name:"UserProfileCard",mixins:[c["a"]],props:{userProfile:{type:[Array,Object],required:!0},initialIsFollowed:{type:Boolean,required:!0},isCurrentUser:{type:Boolean,require:!0}},data:function(){return{personalProfile:this.userProfile,isFollowed:this.initialIsFollowed}},watch:{userProfile:function(e){this.personalProfile=Object(n["a"])(Object(n["a"])({},this.personalProfile),e)},initialIsFollowed:function(e){this.isFollowed=e}},methods:{addFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].addFollowing({userId:e});case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.isFollowed=!0,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),u["a"].fire({icon:"error",title:"新增追蹤失敗，請稍候再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},deleteFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].deleteFollowing({userId:e});case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.isFollowed=!1,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),u["a"].fire({icon:"error",title:"取消追蹤失敗，請稍候再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},m=f,p=r("2877"),g=Object(p["a"])(m,l,o,!1,null,null,null),v=g.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.followings.length))]),e._v(' " following(追蹤者)" ')]),r("div",{staticClass:"card-body"},e._l(e.followings,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"user-profile",params:{id:t.id}}}},[r("img",{staticClass:"avatar mr-2",staticStyle:{width:"60px",height:"60px"},attrs:{src:e._f("emptyImage")(t.image),alt:""}})])})),1)])},w=[],_={mixins:[c["a"]],props:{followings:{type:Array,required:!0}}},C=_,b=Object(p["a"])(C,h,w,!1,null,null,null),y=b.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.followers.length))]),e._v(' " followers(追隨者)" ')]),r("div",{staticClass:"card-body"},e._l(e.followers,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"user-profile",params:{id:t.id}}}},[r("img",{staticClass:"mr-2",staticStyle:{width:"60px",height:"60px"},attrs:{src:e._f("emptyImage")(t.image),alt:""}})])})),1)])},F=[],P={mixins:[c["a"]],props:{followers:{type:Array,required:!0}}},k=P,R=Object(p["a"])(k,x,F,!1,null,null,null),U=R.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.comments.length))]),e._v(' " 已評論餐廳 " ')]),r("div",{staticClass:"card-body"},e._l(e.comments,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.id}}}},[r("img",{staticClass:"avatar mr-2",staticStyle:{width:"60px",height:"60px"},attrs:{src:e._f("emptyImage")(t.Restaurant.image),alt:""}})])})),1)])},O=[],L={mixins:[c["a"]],props:{comments:{type:Array,required:!0}}},I=L,E=Object(p["a"])(I,j,O,!1,null,null,null),q=E.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.favoritedRestaurants.length))]),e._v(' " 收藏的餐廳" ')]),r("div",{staticClass:"card-body"},e._l(e.favoritedRestaurants,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.id}}}},[r("img",{staticClass:"mr-2",staticStyle:{width:"60px",height:"60px"},attrs:{src:e._f("emptyImage")(t.image),alt:""}})])})),1)])},A=[],S={mixins:[c["a"]],props:{favoritedRestaurants:{type:Array,required:!0}}},B=S,D=Object(p["a"])(B,$,A,!1,null,null,null),J=D.exports,z=r("2f62"),G={components:{UserProfileCard:v,UserFollowingsCard:y,UserFollowersCard:U,UserCommentsCard:q,UserFavoritedRestaurantsCard:J},data:function(){return{userProfile:{id:"",name:"",email:"",commentLength:"",favoriteRestaurantLength:"",followingLength:"",followerLength:""},comments:[],favoritedRestaurants:[],followers:[],followings:[],isFollowed:!0}},computed:Object(n["a"])({},Object(z["b"])(["currentUser"])),beforeRouteUpdate:function(e,t,r){var s=e.params.id;this.fetchUser(s),r()},created:function(){var e=this.$route.params.id;this.fetchUser(e),console.log(e)},methods:{fetchUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,i,n,l,o,c,f,m,p,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].get({userId:e});case 3:s=r.sent,a=s.data,i=a.profile,n=i.id,l=i.name,o=i.email,c=i.image,f=i.Comments,m=i.FavoritedRestaurants,p=i.Followers,g=i.Followings,t.userProfile={id:n,name:l,email:o,image:c,commentLength:f.length,favoriteRestaurantLength:m.length,followingLength:g.length,followerLength:p.length},t.comments=f.filter((function(e){return e.Restaurant})),t.favoritedRestaurants=m,t.followers=p,t.followings=g,t.isFollowed=a.isFollowed,r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),console.log(r.t0),u["a"].fire({icon:"error",title:"資料讀取失敗"});case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()}}},H=G,K=Object(p["a"])(H,s,a,!1,null,null,null);t["default"]=K.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.37656bf5.js.map